<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1">
  <title>Магазин с корзиной и избранным</title>
  <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>

/*192.168.0.106*/
#content {
  transition: transform 0.1s ease;
}
.content-left {
  transform: translateX(200px);
  opacity: 0;
}
.content-right {
  transform: translateX(-200px);
  opacity: 0;
}
.content-active {
  /*transform: translateX(0);*/
  opacity: 1;
}
#content h2 {
  margin-top: 60px; /* чуть больше, чем высота верхнего меню */
}
.search-box {
  display: inline-flex;
  align-items: center;
  position: relative;
  transition: width 0.3s ease;
  overflow: hidden;
  vertical-align: middle;
  width: 40px; /* фикс для иконки */
}

.search-box.active {
  width: 200px; /* ширина при раскрытии */
}

.search-box input {
  border: 1px solid #ccc;
  border-radius: 30px;
  padding: 5px 10px;
  font-size: 14px;
  width: 100%;
  opacity: 0;
  transition: opacity 0.3s ease;
}

.search-box.active input {
  opacity: 1;
}

body { margin:0; font-family:Arial,sans-serif; scroll-behavior:smooth; }

.top-nav {
  position:fixed; top:0; left:0; right:0; background:white; z-index:9998;
  padding:2px; white-space:nowrap;
  overflow-x:auto;                 /* <-- нужно для горизонтального скролла */
  -webkit-overflow-scrolling:touch;/* <-- инерция на iOS */
  overflow-anchor: none;
}
.top-nav a {display:inline-block;padding:14px 16px;text-decoration:none;color:black;}
.top-nav a.active {border:1px solid maroon;border-radius:30px;color:maroon;font-weight:600;}
.count-badge {background:maroon;color:white;border-radius:50%;padding:2px 7px;font-size:12px;margin-left:5px;vertical-align:middle;font-weight:600;}

.category-nav {position:fixed;bottom:0;left:0;right:0;background:white;overflow-x:auto;white-space:nowrap;border-top:1px solid #ccc;z-index: 1;}
.category-nav a {display:inline-block;padding:14px 16px;text-decoration:none;color:black;transition:0.3s;}
.category-nav a.active {background:maroon;color:white;border-radius:30px;font-weight:600;}

.content {padding:60px 0 60px 0;}
.section {padding:20px;margin-bottom:40px;border-bottom:1px solid #ccc;}

.w3-modal-content {position:fixed;bottom:0;left:0;right:0;max-width:400px;margin:auto;}
.square-image {width:100%;height:300px;overflow:hidden;}
.square-image img {width:100%;height:100%;object-fit:cover;}

.like-container {cursor:pointer;display:flex;align-items:center;gap:4px;}
.like-btn {color:red;font-size:20px;}

/* Нижняя панель "Итого + Купить" только на странице корзины */
.fixed-buy {position:fixed;left:0;right:0;bottom:0;background:#fff;box-shadow:0 -2px 6px rgba(0,0,0,.1);padding:10px 16px;z-index:9997;}
.fixed-buy .sum {font-weight:700;margin:0 0 8px;}
</style>
</head>
<body>
<!-- Верхнее меню -->

<div id="topNav" class="top-nav">
  <div id="searchBox" class="search-box">
    <i id="searchIcon" class="fa fa-search" style="cursor:pointer;padding:14px 10px;"></i>
    <input type="text" id="searchInput" placeholder="Поиск...">
  </div>
  <a href="#menu" class="active">Меню</a>
  <a href="#favorites">Избранное 
    <span id="favCount" class="count-badge" style="display:none"></span>
  </a>
  <a href="#cart">Корзина 
    <span id="cartCount" class="count-badge" style="display:none"></span>
  </a>
</div>


<!-- Нижнее меню категорий -->
<div id="categoryNav" class="category-nav"></div>

<!-- Контент -->
<div class="content" id="content"></div>

<!-- Модальное окно товара -->
<div id="productModal" class="w3-modal">
  <div class="w3-modal-content w3-animate-bottom">
    <header class="square-image">
      <span onclick="closeModal()" class="w3-button w3-display-topright">&times;</span>
      <img id="modalImage" src="" alt="">
    </header>
    <div class="w3-container" style="padding-bottom:20px;">
      <h3 id="modalName"></h3>
      <div style="display:flex;justify-content:space-between;">
        <p id="modalPrice"></p><p id="modalWeight"></p>
      </div>
      <div style="display:flex;align-items:center;justify-content:space-between;margin-top:15px;">
        <div>
          <button id="qtyMinus" class="w3-button w3-black w3-round">-</button>
          <span id="qtyValue">1</span>
          <button id="qtyPlus" class="w3-button w3-black w3-round">+</button>
        </div>
        <p id="totalPrice" style="font-weight:bold;">0 грн</p>
        <button class="w3-button w3-green" onclick="addToCart()">В корзину</button>
      </div>
    </div>
  </div>
</div>

<!-- Модальное окно оформления заказа -->
<div id="orderModal" class="w3-modal">
  <div class="w3-modal-content w3-animate-bottom">
    <header class="w3-container w3-teal">
      <span onclick="document.getElementById('orderModal').style.display='none'" class="w3-button w3-display-topright">&times;</span>
      <h3>Оформление заказа</h3>
    </header>
    <div class="w3-container" style="padding-bottom:20px;">
      <form id="orderForm" method="post" action="order.php">
        <p>Сумма заказа: <strong id="orderTotal"></strong> грн</p>
        <input type="hidden" name="total" id="formTotal">
        <p><input class="w3-input" type="text" name="name" placeholder="Ваше имя" required></p>
        <p><input class="w3-input" type="tel" name="phone" placeholder="Телефон" required></p>
        <p>
          <select class="w3-select" name="delivery" required>
            <option value="" disabled selected>Выберите доставку</option>
            <option value="Самовывоз">Самовывоз</option>
            <option value="Адресная доставка">Адресная доставка</option>
          </select>
        </p>
        <p><textarea class="w3-input" name="comment" placeholder="Комментарий к заказу"></textarea></p>
        <input type="hidden" name="cart" id="formCart">
        <button class="w3-button w3-green" type="submit" style="width:100%">Отправить заказ</button>
      </form>
    </div>
  </div>
</div>

<!-- Подключаем по порядку -->
  <script src="js/utils.js"></script> 
  <script src="js/menu.js"></script>
  <script src="js/api.js"></script> 
  <script src="js/products.js"></script>
  <script src="js/cart.js"></script>
  <script src="js/main.js"></script>



</body>
</html>
